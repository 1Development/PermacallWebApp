@model PermacallTools.Models.WoWGuild.HistoryModel
@{
    ViewBag.Title = "History";
}

<div class="contentBox form-horizontal col-lg-12 col-md-12" style="font-weight: bold; font-size: 110%; margin-top: 50px;">
    <h2>Oath of Oblivion</h2>
    
    @if (Model.WoWGuild != null && Model.AllBackups == null)
    {
        

        <table class="table table-bordered" style="max-width: 100%">
            <thead>
            <tr style="background-color: rgba(255, 255, 255, 0.2);">
                <th>Player</th>
                <th>Avg. ILvL</th>
                <th>Artifact</th>
                <th>Head</th>
                <th>Neck</th>
                <th>Shoulder</th>
                <th>Back</th>
                <th>Chest</th>
                <th>Wrist</th>
                <th>Hands</th>
                <th>Waist</th>
                <th>Legs</th>
                <th>Feet</th>
                <th>Ring1</th>
                <th>Ring2</th>
                <th>Trinket1</th>
                <th>Trinket2</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var character in Model.WoWGuild.WoWCharacters)
            {
                <tr>
                    <td>@character.name</td>
                    <td>@character.items.averageItemLevelEquipped/@character.items.averageItemLevel</td>
                    <td style="background-color: @character.items.mainHand.rarityColor">@character.items.mainHand.itemLevel</td>
                    <td style="background-color: @character.items.head.rarityColor">@character.items.head.itemLevel</td>
                    <td style="background-color: @character.items.neck.rarityColor">@character.items.neck.itemLevel</td>
                    <td style="background-color: @character.items.shoulder.rarityColor">@character.items.shoulder.itemLevel</td>
                    <td style="background-color: @character.items.back.rarityColor">@character.items.back.itemLevel</td>
                    <td style="background-color: @character.items.chest.rarityColor">@character.items.chest.itemLevel</td>
                    <td style="background-color: @character.items.wrist.rarityColor">@character.items.wrist.itemLevel</td>
                    <td style="background-color: @character.items.hands.rarityColor">@character.items.hands.itemLevel</td>
                    <td style="background-color: @character.items.waist.rarityColor">@character.items.waist.itemLevel</td>
                    <td style="background-color: @character.items.legs.rarityColor">@character.items.legs.itemLevel</td>
                    <td style="background-color: @character.items.feet.rarityColor">@character.items.feet.itemLevel</td>
                    <td style="background-color: @character.items.finger1.rarityColor">@character.items.finger1.itemLevel</td>
                    <td style="background-color: @character.items.finger2.rarityColor">@character.items.finger2.itemLevel</td>
                    <td style="background-color: @character.items.trinket1.rarityColor">@character.items.trinket1.itemLevel</td>
                    <td style="background-color: @character.items.trinket2.rarityColor">@character.items.trinket2.itemLevel</td>
                </tr>
            }
            </tbody>

        </table>

        <h4>@Model.WoWGuild.Updated.ToString("d-M-yyyy_HH:mm")</h4>
        <h6>@Html.ActionLink("View different records", "History", "WoWGuild")</h6>
    }
    else if (Model.AllBackups != null && Model.WoWGuild == null)
    {
        <h4>List of all recorded stats</h4>

        <div class="row">
            @foreach (var fileName in Model.AllBackups)
            {
                <div class="col-md-3">@Html.ActionLink(fileName, "History", "WoWGuild", new { record = fileName }, new { })</div>
            }
        </div>

    }
    else
    {
        <br />
        <h4>Error</h4>
        <p>The list appears to be empty, try loading @Html.ActionLink("The main page", "Index", "WoWGuild")</p>
    }
    @Html.ActionLink("Most Recent", "Index", "WoWGuild")
    
</div>